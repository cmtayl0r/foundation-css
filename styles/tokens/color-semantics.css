/*
================================================================================
DARK THEME (DEFAULT)
================================================================================
*/
:root {
  color-scheme: dark;

  /* ===== SURFACE FOUNDATION HIERARCHY ===== */
  /* Simple rule: Each layer is 1 step lighter than the previous */
  /* Page → Container → Card → Nested Card */

  --surface-page: var(--color-neutral-950);
  --surface-container: var(--color-neutral-900);
  /* Main content areas */
  --surface-card: var(--color-neutral-800);
  /* Cards, panels */
  --surface-nested: var(--color-neutral-600);
  /* Nested elements in cards */
  --surface-overlay: var(--color-neutral-950);
  /* Modals, dropdowns, tooltips */
  --surface-inverse: var(--color-white);
  /* Inverse elements */
  --surface-scrim: rgba(0, 0, 0, 0.6);
  /* Scrim elements */

  /* ===== COMPONENT SURFACE VARIANTS ===== */

  --surface-ghost: transparent;
  --surface-neutral: var(--surface-card);
  --surface-primary: var(--color-primary-700);
  --surface-primary-muted: var(--color-primary-950);
  --surface-secondary: var(--color-secondary-700);
  --surface-secondary-muted: var(--color-secondary-950);

  /* ===== INTERACTION CONFIGURATION ===== */
  /* Centralized control for all interactive states */
  --interaction-mix-target: var(--color-white);
  --interaction-hover-strength: 12%;
  --interaction-focus-strength: 15%;
  --interaction-active-strength: 18%;
  --interaction-selected-strength: 15%;
  --interaction-drag-strength: 15%;

  /* Generic state mix definitions */
  --state-color-hover: color-mix(in oklch, var(--surface-base) calc(100% - var(--interaction-hover-strength)), var(--interaction-mix-target) var(--interaction-hover-strength));
  --state-color-focus: color-mix(in oklch, var(--surface-base) calc(100% - var(--interaction-focus-strength)), var(--interaction-mix-target) var(--interaction-focus-strength));
  --state-color-active: color-mix(in oklch, var(--surface-base) calc(100% - var(--interaction-active-strength)), var(--interaction-mix-target) var(--interaction-active-strength));
  --state-color-selected: color-mix(in oklch, var(--surface-base) calc(100% - var(--interaction-selected-strength)), var(--interaction-mix-target) var(--interaction-selected-strength));
  --state-color-drag: color-mix(in oklch, var(--surface-base) calc(100% - var(--interaction-drag-strength)), var(--interaction-mix-target) var(--interaction-drag-strength));

  /* ===== UNIVERSAL INTERACTION STATES ===== */
  /* Assign states to each surface variant by setting a --surface-base */

  /* Ghost states use surface-card as base for visibility */
  --surface-ghost-hover: var(--state-color-hover, transparent);
  --surface-ghost-focus: var(--state-color-focus, transparent);
  --surface-ghost-active: var(--state-color-active, transparent);
  --surface-ghost-selected: var(--state-color-selected, transparent);
  --surface-ghost-drag: var(--state-color-drag, transparent);
  --surface-ghost-disabled: var(--color-neutral-700);

  /* All other surfaces use their base + interaction formula */
  --surface-neutral-hover: var(--state-color-hover, transparent);
  --surface-neutral-focus: var(--state-color-focus, transparent);
  --surface-neutral-active: var(--state-color-active, transparent);
  --surface-neutral-selected: var(--state-color-selected, transparent);
  --surface-neutral-drag: var(--state-color-drag, transparent);
  --surface-neutral-disabled: var(--color-neutral-700);

  --surface-primary-hover: var(--state-color-hover, transparent);
  --surface-primary-focus: var(--state-color-focus, transparent);
  --surface-primary-active: var(--state-color-active, transparent);
  --surface-primary-selected: var(--state-color-selected, transparent);
  --surface-primary-drag: var(--state-color-drag, transparent);
  --surface-primary-disabled: var(--color-primary-800);

  --surface-primary-muted-hover: var(--state-color-hover, transparent);
  --surface-primary-muted-focus: var(--state-color-focus, transparent);
  --surface-primary-muted-active: var(--state-color-active, transparent);
  --surface-primary-muted-selected: var(--state-color-selected, transparent);
  --surface-primary-muted-drag: var(--state-color-drag, transparent);
  --surface-primary-muted-disabled: var(--color-primary-800);

  --surface-secondary-hover: var(--state-color-hover, transparent);
  --surface-secondary-focus: var(--state-color-focus, transparent);
  --surface-secondary-active: var(--state-color-active, transparent);
  --surface-secondary-selected: var(--state-color-selected, transparent);
  --surface-secondary-drag: var(--state-color-drag, transparent);
  --surface-secondary-disabled: var(--color-secondary-800);

  --surface-secondary-muted-hover: var(--state-color-hover, transparent);
  --surface-secondary-muted-focus: var(--state-color-focus, transparent);
  --surface-secondary-muted-active: var(--state-color-active, transparent);
  --surface-secondary-muted-selected: var(--state-color-selected, transparent);
  --surface-secondary-muted-drag: var(--state-color-drag, transparent);
  --surface-secondary-muted-disabled: var(--color-secondary-800);

  /* ===== CONTENT ===== */

  --content-base: var(--color-white);
  --content-weak: var(--color-neutral-200);
  --content-weakest: var(--color-neutral-400);
  --content-disabled: var(--color-neutral-500);
  --content-inverse: var(--color-black);
  --content-fixed-light: var(--color-white);
  --content-fixed-dark: var(--color-neutral-950);
  --content-on-primary: var(--color-white);
  --content-on-secondary: var(--color-white);
  --content-on-primary-muted: var(--color-primary-200);
  --content-on-secondary-muted: var(--color-secondary-200);
  --content-error: var(--color-error-400);
  --content-success: var(--color-success-400);

  /* ===== BORDER ===== */

  --border-base: var(--color-neutral-400);
  --border-weak: var(--color-neutral-500);
  --border-strong: var(--color-neutral-300);
  --border-strongest: var(--color-neutral-100);
  --border-primary: var(--color-primary-400);
  --border-secondary: var(--color-secondary-400);
  --border-error: var(--color-error-400);
  --border-success: var(--color-success-400);
  --border-focus: var(--color-secondary-400);
}

/*
================================================================================
LIGHT THEME OVERRIDES
================================================================================
*/

@media (prefers-color-scheme: light) {
  :root:not(.theme-dark):not([data-theme="dark"]) {
    color-scheme: light;

    /* ===== SURFACE OVERRIDES ===== */
    --surface-page: var(--color-white);
    --surface-container: var(--color-neutral-50);
    --surface-card: var(--color-neutral-100);
    --surface-nested: var(--color-neutral-300);
    --surface-overlay: var(--color-white);
    --surface-inverse: var(--color-black);
    --surface-scrim: rgba(0, 0, 0, 0.4);

    /* ===== COMPONENT SURFACE OVERRIDES ===== */
    --surface-primary: var(--color-primary-600);
    --surface-primary-muted: var(--color-primary-100);
    --surface-secondary: var(--color-secondary-600);
    --surface-secondary-muted: var(--color-secondary-100);

    /* ===== INTERACTION OVERRIDE ===== */
    --interaction-mix-target: var(--color-black);
    --interaction-hover-strength: 8%;
    --interaction-focus-strength: 10%;
    --interaction-active-strength: 12%;
    --interaction-selected-strength: 10%;
    --interaction-drag-strength: 10%;
    /* All interaction states automatically recalculate! */

    /* ===== CONTENT OVERRIDES ===== */
    --content-base: var(--color-black);
    --content-weak: var(--color-neutral-700);
    --content-weakest: var(--color-neutral-500);
    --content-disabled: var(--color-neutral-400);
    --content-inverse: var(--color-white);
    --content-fixed-dark: var(--color-black);
    --content-on-primary-muted: var(--color-primary-800);
    --content-on-secondary-muted: var(--color-secondary-800);
    --content-error: var(--color-error-600);
    --content-success: var(--color-success-600);

    /* ===== BORDER OVERRIDES ===== */
    --border-weak: var(--color-neutral-300);
    --border-strong: var(--color-neutral-600);
    --border-strongest: var(--color-neutral-800);
    --border-primary: var(--color-primary-300);
    --border-secondary: var(--color-secondary-300);
    --border-error: var(--color-error-300);
    --border-success: var(--color-success-300);
    --border-focus: var(--color-secondary-600);
  }
}

/*
================================================================================
MANUAL THEME OVERRIDES (INHERIT FROM MEDIA QUERIES)
================================================================================
*/

:root.theme-light,
:root[data-theme="light"] {
  color-scheme: light;
}

:root.theme-dark,
:root[data-theme="dark"] {
  color-scheme: dark;
}

/* Re-apply dark theme variables for manual override without duplication */
.theme-dark,
[data-theme="dark"] {
  --interaction-mix-target: var(--color-white);

  /* Component surfaces */
  --surface-primary: var(--color-primary-700);
  --surface-primary-muted: var(--color-primary-950);
  --surface-secondary: var(--color-secondary-700);
  --surface-secondary-muted: var(--color-secondary-950);
}

/*
================================================================================
HIGH CONTRAST ENHANCEMENT
================================================================================
*/

@media (prefers-contrast: high) {
  :root {
    /* High contrast mode uses stronger surface differentiation */
    --interaction-hover-strength: 25%;
    --interaction-focus-strength: 30%;
    --interaction-active-strength: 35%;
    --interaction-selected-strength: 30%;
    --interaction-drag-strength: 30%;

    /* Maximum contrast surfaces */
    --surface-page: var(--color-black);
    --surface-container: var(--color-neutral-950);
    --surface-card: var(--color-neutral-900);
    --surface-nested: var(--color-neutral-700);

    /* Enhanced content contrast */
    --content-weak: var(--color-neutral-100);
    --content-weakest: var(--color-neutral-300);

    /* Enhanced border contrast */
    --border-base: var(--color-neutral-300);
    --border-weak: var(--color-neutral-400);
  }

  :root.theme-light,
  :root[data-theme="light"] {
    --surface-page: var(--color-white);
    --surface-container: var(--color-neutral-50);
    --surface-card: var(--color-neutral-100);
    --surface-nested: var(--color-neutral-200);

    --content-weak: var(--color-neutral-800);
    --content-weakest: var(--color-neutral-600);
    --border-base: var(--color-neutral-500);
    --border-weak: var(--color-neutral-400);
  }
}
